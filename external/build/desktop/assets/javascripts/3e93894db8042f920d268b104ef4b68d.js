window.should_log=true;window.log=function(){log.history=log.history||[];log.history.push(arguments);if(window.should_log&&this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);(typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,a))}};(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})((function(){try{console.log();return window.console}catch(a){return window.console={}}})());$.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=$.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};function Doorman(){var b=function(){return !!$.cookie("age_verified")};var a=function(){var c=["google","googlebot","livebot","msnbot","facebookscraper","facebookexternalhit","ask jeeves"];return navigator.userAgent.match(new RegExp("("+c.join(")|(")+")","i"))!==null};this.verify_age=function(c){if(b()||a()){$("#bouncer-overlay").remove();if(c){c()}return}return this.ask_for_id(c)};this.ask_for_id=function(e){var c=$("#bouncer-overlay"),d=this;c.removeClass("disappear");$("#bouncer .y").click(function(f){f.preventDefault();d.remember_for_later();if(e){e()}c.addClass("disappear");setTimeout(function(){c.remove()},300)});$("#bouncer .n").click(this.i_dont_think_so)};this.remember_for_later=function(){$.cookie("age_verified",true)};this.i_dont_think_so=function(c){c.preventDefault();window.location.href="http://www.google.co.nz/search?q=virgin+cocktails"}}function Suite(){var h=this,b=new Scroll(),c=new Doorman(),a=new ImageLoader(),d=0,f=$("#loading .message");var g={lines:16,length:0,width:5,radius:24,color:"#000",speed:1.2,trail:60,shadow:false,hwaccel:true,className:"spinner",zIndex:2000000000,top:"auto",left:"auto"};var e=$("#loading .loading_bar span");this.load=function(){a.loadGroup("index",h.menu_preloaded,h.bump_loading);h.initMobile();$(function(){b.prepare();setTimeout(function(){c.verify_age(function(){b.init()})},700)})};this.bump_loading=function(){d++;e.css({width:(Math.round(d/8*94)+6)+"%"})};this.menu_preloaded=function(j){$.each(j,function(m,l){h.apply_image(m,l.src);log("loaded "+m+" with "+l.src)});a.loadGroup("visuals_low_res",function(){a.loadGroup("visuals_high_res",b.set_positions,h.high_visual_preloaded)},h.low_visual_preloaded);$("#loading-overlay").remove()};this.low_visual_preloaded=function(j){log("Loaded "+j.rel);h.apply_image(j.rel,j.src,{backgroundSize:"cover"})};this.high_visual_preloaded=function(j){log("Loaded "+j.rel);h.apply_image(j.rel,j.src,{backgroundSize:"cover"})};this.apply_image=function(k,l,j){var j=j||{};log("Applying "+k);$(k).css($.extend(j,{backgroundImage:"url("+l+")",opacity:1}))};this.initMobile=function(){if(!navigator.userAgent.match(/iP(hone|od|ad)/i)){return}document.title="Suite Bar"}}function Scroll(){var a=this;this.s={last_story_index:false,follow:false,num_stories:0,window_height:false,stories:["about-1","about-2","cocktail-1","cocktail-2","white-wine","red-wine","beer-1","whiskey","gin","vodka","bitter","tequila","bourbon","cognac","rum"]};this.classes={prev:"prev",current:"current",bottom:"bottom",fixed:"fixed",next:"next"};this.prepare=function(){a.init_stories();a.scroll_to_hash();a.handle_hash_links();a.menu_preparations()};this.init=function(){a.stories=[];a.set_positions();a.s.num_stories=a.stories.length;$(window).scroll(a.scrollHandler);$(window).resize(a.resizeHandler);a.initMenu();a.prepareContact()};this.menu_preparations=function(){$(".menu-cocktails").hover(function(){$(this).css("z-index",76)},function(){$(this).css("z-index",74)})};this.scroll_to_hash=function(){if(location.hash){hash=location.hash;a.trigger_ui(hash)}};this.handle_hash_links=function(){$(function(){$("nav a, .menu-item, header a").click(function(c){var b=$(this).attr("href");a.push_hash(b);if(window.location.href.indexOf("scroll=true")==-1){return}c.preventDefault();$("html, body").animate({scrollTop:$(b).offset().top},{duration:200,easing:"easeInOutSine",complete:function(){location.hash=b}})})})};this.resizeHandler=function(){a.set_positions();a.scrollHandler()};this.set_positions=function(){a.s.window_height=a.windowY();$(".story .visual").css({height:a.s.window_height});a.story_positions=[];$(".story").each(function(){a.story_positions.push(a.offsetTop(this));if(method==="style"){a.stories.push($(this).find(".visual"))}else{a.stories.push($(this))}})};this.init_stories=function(){$(".story").each(function(b){story=$(this);story.css({zIndex:b+40});$.each(a.s.stories,function(d,c){if(!story.hasClass(c)){return true}story.prepend($('<div class="visual" />'));return true})})};this.offsetTop=function(c){var b=0;if(c.offsetParent){do{b+=c.offsetTop}while((c=c.offsetParent))}return b};this.scrollY=function(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)};this.windowY=function(){var b=0;if(document.body&&document.body.offsetWidth){b=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){b=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){b=window.innerHeight}return b};method="class";this.scrollHandler=function(){y=a.scrollY();follow=true;for(var d=0,b=a.s.num_stories;d<b;d++){pos=a.story_positions[d];if(y>=pos){continue}d--;follow=y<=pos-a.s.window_height;break}match=d===a.s.last_story_index&&follow===a.s.follow;if(!match){method==="style"?a.removeStyles():a.removeClasses(d,follow);method==="style"?a.setStylesAt(d,follow):a.setClassesAt(d,follow);if(d!==a.s.last_story_index&&d!==-1){el=(method==="style"?a.stories[d].parent():a.stories[d]).eq(0);var c=0;while(c<100&&el&&!(id=el.attr("id"))){el=el.prev();c++}if(id){a.push_hash("#"+id,d)}}}a.s.last_story_index=d;a.s.follow=follow};this.push_hash=function(c,b){clearTimeout(a.hash_debounce);a.hash_debounce=setTimeout(function(){c=c.replace(/^#/,"");a.replace_hash(c);if(a.stories[b]){a.stories[b].find("h2").animate({opacity:0},{duration:200,easing:"easeInOutSine",complete:function(){a.stories[b].addClass("delayed");$(this).animate({opacity:1},{duration:500,easing:"easeInOutSine"})}})}_gaq.push(["_trackPageview",c]);a.trigger_ui(c)},150)};this.replace_hash=function(d){var c,b=$("#"+d);if(b.length){c=$("<div></div>").css({position:"absolute",visibility:"hidden",top:a.scrollY()+"px"}).attr("id",d).appendTo(document.body);b.attr("id","")}document.location.hash=d;if(b.length){c.remove();b.attr("id",d)}};this.removeStyles=function(){i=a.s.last_story_index;if(i===false||i===-1){return}a.stories[i].css({position:"absolute",top:"0",bottom:"auto"})};this.removeClasses=function(c,b){if((b&&c!=a.s.last_story_index)||c<a.s.last_story_index){$(".story").removeClass("delayed")}if(c<0){a.startMenuHint();setTimeout(function(){$("header li").removeClass("active");a.replace_hash("main-menu")},500)}c=a.s.last_story_index;if(c===false||c===-1){return}a.stories[c].removeClass(a.classes.fixed);a.stories[c].removeClass(a.classes.bottom)};this.initMenu=function(){a.startMenuHint();$(".menu-item").hover(a.clearMenuHint,function(){a.startMenuHint(6000)})};this.startMenuHint=function(b){a.clearMenuHint();a.menuHintTimeout=setTimeout(function(){hint=$("#main-menu .hint");hint.animate({opacity:0.8},{duraction:300,easing:"easeInOutSine"}).delay(1500).animate({opacity:0},{duraction:300,easing:"easeInOutSine"})},b||4000)};this.clearMenuHint=function(){clearTimeout(a.menuHintTimeout)};this.setStylesAt=function(c,b){if(c===-1){return}if(b){a.stories[c].css({position:"fixed",top:0,bottom:"auto"})}else{a.stories[c].css({position:"absolute",top:"auto",bottom:0})}};this.setClassesAt=function(c,b){if(c===-1){return}a.stories[c].addClass(b?a.classes.fixed:a.classes.bottom)};this.trigger_ui=function(b){log("Triggering "+b);switch(b.replace("#","")){case"contact":this.init_contact();break}$("header li").removeClass("active");$("header a[href=#"+b.replace("#","")+"]").parent("li").addClass("active")};this.prepareContact=function(){a.card_to_call=new CardToCall("#card_container");$(".card_flip").click(a.card_to_call.flip);a.booking=new Booking;a.booking.init()};this.init_contact=function(){if(a.contact){return}a.contact=new Contact();a.contact.init()}}var ImageLoader=function(){var b=this;this.saved_groups={};var a={index:{"#main-menu":"/assets/images/b/index.jpg",".menu-spirits":"/assets/images/m/spirits-mask.png",".menu-cocktails":"/assets/images/m/cocktails-mask.png",".menu-food":"/assets/images/m/food-mask.png",".menu-beer":"/assets/images/m/beer-mask.png",".menu-wine":"/assets/images/m/wine-mask.png",".menu-music":"/assets/images/m/music-mask.png",".menu-awards":"/assets/images/m/awards-mask.png",".menu-people":"/assets/images/m/people-mask.png"},visuals_high_res:{".about-2 .visual":"/assets/images/b/about-1.jpg",".cocktail-1 .visual":"/assets/images/b/cocktails-2.jpg",".cocktail-2 .visual":"/assets/images/b/wine-1.jpg",".white-wine .visual":"/assets/images/b/white-wine.jpg",".red-wine .visual":"/assets/images/b/red-wine.jpg",".beer-1 .visual":"/assets/images/b/beer-1.jpg",".whiskey .visual":"/assets/images/b/whiskey.jpg",".gin .visual":"/assets/images/b/gin.jpg",".bitter .visual":"/assets/images/b/bitter.jpg",".tequila .visual":"/assets/images/b/tequila.jpg",".bourbon .visual":"/assets/images/b/bourbon.jpg",".cognac .visual":"/assets/images/b/cognac.jpg",".rum .visual":"/assets/images/b/rum.jpg"},visuals_low_res:{".about-2 .visual":"/assets/images/b/low/about-1.jpg",".cocktail-1 .visual":"/assets/images/b/low/cocktails-2.jpg",".cocktail-2 .visual":"/assets/images/b/low/wine-1.jpg",".white-wine .visual":"/assets/images/b/low/white-wine.jpg",".red-wine .visual":"/assets/images/b/low/red-wine.jpg",".beer-1 .visual":"/assets/images/b/low/beer-1.jpg",".whiskey .visual":"/assets/images/b/low/whiskey.jpg",".gin .visual":"/assets/images/b/low/gin.jpg",".bitter .visual":"/assets/images/b/low/bitter.jpg",".tequila .visual":"/assets/images/b/low/tequila.jpg",".bourbon .visual":"/assets/images/b/low/bourbon.jpg",".cognac .visual":"/assets/images/b/low/cognac.jpg",".rum .visual":"/assets/images/b/low/rum.jpg"}};this.loadGroup=function(g,f,d){log("Loading group "+g);var h={},e=0;b.saved_groups[g]=h;var c=function(){e--;log("Loaded image "+this.src+", "+e+" left");if(d){d(this)}if(e<=0){log("Group loaded");if(f){f(h)}}};$.each(a[g],function(l,j){img=new Image();img.rel=l;img.onload=c;img.src=j;h[l]=img;e++})}};(function(){})();var maps_callback;var Contact=function(){var h=this,g,d=[-36.844739,174.763244],c=$("#contact .visual .map").get(0),b,f,e;this.init=function(){maps_callback=h.load;$("#contact .visual").css({opacity:1});$.getScript("//maps.googleapis.com/maps/api/js?sensor=false&callback=maps_callback");h.fix_cursor_bug()};this.fix_cursor_bug=function(){cursor=new Image();cursor.src="http://maps.gstatic.com/mapfiles/openhand_8_8.cur"};this.load=function(){h.load_stamen();e=a();var j="toner";var k={zoom:16,scrollwheel:false,center:new google.maps.LatLng(e[0],e[1]),disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeId:j,mapTypeControlOptions:{mapTypeIds:[j]}};g=new google.maps.Map(c,k);g.mapTypes.set(j,new google.maps.StamenMapType(j));h.pin_suite();h.setup_streetview()};var a=function(){var j=489+110;return[d[0]+(0.0001*(20/5.82)),d[1]+(0.0001*Math.round(j/2)/4.666)]};this.pin_suite=function(){var n=new google.maps.MarkerImage("http://mal.co.nz/suite/skull-pin-shadow.png",new google.maps.Size(70,42),new google.maps.Point(0,0),new google.maps.Point(10,42));var l=new google.maps.MarkerImage("http://mal.co.nz/suite/skull-pin.png",new google.maps.Size(41,54),new google.maps.Point(0,0),new google.maps.Point(20,54));var j={coord:[1,1,1,20,18,20,18,1],type:"poly"};var k=new google.maps.LatLng(d[0],d[1]);b=new google.maps.Marker({position:k,map:g,icon:l,shadow:n,shape:j});f=new google.maps.InfoWindow({content:"<p>Suite Bar<p><p><small>123 Hobson St<br />Auckland</small></p>"});function m(p,r,q,o){this.options_=$.extend({width:200,height:90},o);this.loc_=r;this.map_=q;this.div_=null;this.content_=p;this.setMap(q)}m.prototype=new google.maps.OverlayView();m.prototype.onAdd=function(){var p=document.createElement("DIV");p.style.border="none";p.style.borderWidth="0px";p.style.position="absolute";p.className="black-overlay";p.innerHTML=this.content_;this.div_=p;var o=this.getPanes();o.overlayLayer.appendChild(p)};m.prototype.draw=function(){var q=this.getProjection();var p=q.fromLatLngToDivPixel(this.loc_);var r=this.options_.width;var o=this.options_.height;var s=this.div_;s.style.left=(p.x-(r/2))+"px";s.style.top=(p.y-80-o)+"px";s.style.width=r+"px";s.style.height=o+"px"};overlay=new m("<p>Suite Bar</p><p><small>2 Hobson St<br />Auckland Central</small></p>",new google.maps.LatLng(d[0],d[1]),g);google.maps.event.addListener(b,"click",function(){f.open(g,b)})};this.setup_streetview=function(){var k={addressControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},linksControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},panControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},enableCloseButton:true,scrollwheel:false,visible:false};var j=new google.maps.StreetViewPanorama(c,k);g.setStreetView(j)};this.load_stamen=function(){var j=["","a.","b.","c.","d."],l={toner:{url:"http://{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20},"toner-lines":{url:"http://{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20},"toner-labels":{url:"http://{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20},terrain:{url:"http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:18},watercolor:{url:"http://{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16}},m='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.';function k(n){if(n in l){return l[n]}else{throw'No such provider: "'+n+'"'}}if(typeof google==="object"&&typeof google.maps==="object"){google.maps.StamenMapType=function(n){var o=k(n);return google.maps.ImageMapType.call(this,{getTileUrl:function(r,q){var p=(q+r.x+r.y)%j.length;return[o.url.replace("{S}",j[p]).replace("{Z}",q).replace("{X}",r.x).replace("{Y}",r.y)]},tileSize:new google.maps.Size(256,256),name:n,minZoom:o.minZoom,maxZoom:o.maxZoom})};google.maps.StamenMapType.prototype=new google.maps.ImageMapType("_")}}};$.extend($.easing,{easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a}});var CardToCall=function(a){var g=this,f="",c=$(a);var e=$("#card_to_call");function b(){if(navigator.appVersion.indexOf("Mac")<0){isMacOS=false}if(navigator.appVersion.indexOf("iPhone")>-1||navigator.appVersion.indexOf("iPod")>-1||navigator.appVersion.indexOf("iPad")>-1){isTouchDevice=true;document.body.className+=" touch";document.getElementById("downloadButton").onmouseover=download}if(navigator.appVersion.indexOf("WebKit")>-1){if((window.media&&window.media.matchMedium("(-webkit-transform-3d)"))||(window.styleMedia&&window.styleMedia.matchMedium("-webkit-transform-3d"))){document.body.className+=" browserWebKit";f="webkit"}else{document.body.className+=" browserOldWebkit";f="oldWebkit"}}else{document.body.className+=" browserOther";f="other"}}g.flip=function(h){h.preventDefault();e.toggleClass("flipped");return;var k=document.getElementById("featuresCard");var j=this;if(d(h)){document.getElementById("featuresCard").style.webkitTransitionDuration="3s";flipMidpoint=900}else{document.getElementById("featuresCard").style.webkitTransitionDuration="1s";flipMidpoint=300}if(k.className==""){hideAllEffects();if(f=="oldWebkit"){setTimeout("document.getElementById('featuresList').style.display = 'block'",flipMidpoint);setTimeout("document.getElementById('featuresScreenshots').style.display = 'none'",flipMidpoint)}else{if(f=="other"){document.getElementById("featuresList").style.display="block";document.getElementById("featuresScreenshots").style.display="none"}}}else{setTimeout("document.getElementById('featuresEffects"+swappedView+"').style.display = 'block'",(flipMidpoint*2));if(f=="oldWebkit"){setTimeout("document.getElementById('featuresList').style.display = 'none'",flipMidpoint);setTimeout("document.getElementById('featuresScreenshots').style.display = 'block'",flipMidpoint)}else{if(f=="other"){document.getElementById("featuresList").style.display="none";document.getElementById("featuresScreenshots").style.display="block"}}}k.className=(k.className=="")?"card flipped":"";j.className=(j.className=="")?"pressed":""};function d(j){var h=false;if(!j&&window.event){h=window.event.shiftKey}else{if(j){h=j.shiftKey;if(h){j.stopPropagation()}}}return h}};(function(h){var d;var g=function(p,k){if(!(p instanceof Element||typeof p==="string")){k=p}var t=this,B=t.classes,s=t.settings=b.merge(t.defaults,{attachTo:p},k||{}),v=t.container=b.make("div",{"class":B.container}),m=t.calendars=[],q=e().day(s.weekStart),n,z=[],A,u,o,C,r,F=[],E,x=0,w=s.months;x=7;while(x--){z.push(q.format("ddd").substr(0,s.columnHeaderLength));q.add("days",1)}f(t);if(typeof s.subscribe==="object"){for(x in s.subscribe){if(s.subscribe.hasOwnProperty(x)){t.subscribe(x,s.subscribe[x])}}}t._sel=[];if(!!s.selected){t.setSelected(s.selected,false)}if(!!s.viewStartDate){n=e(s.viewStartDate,s.format)}else{if(t._sel.length>0){n=e(t._sel[0])}else{n=e()}}t.viewStartDate=n.date(1);var D=({past:s.months-1,"today-past":s.months-1,any:s.months>2?Math.floor(s.months/2):0,"today-future":0,future:0})[this.settings.direction];if(D&&e().month()==e(t.viewStartDate).month()){t.viewStartDate=e(t.viewStartDate).subtract({M:D}).date(1)}if(typeof s.blackout==="function"){t.blackout=s.blackout}else{if(!!s.blackout){var l=c(s.blackout,s.parseSplitDelimiter);t.blackout=function(j){j=e(j).yearDay();if(j<1||!t._sel||t._sel.length<1){return false}var G=l.length;while(G--){if(l[G].yearDay()===j){return true}}return false}}else{t.blackout=function(){return false}}}t.direction=t.directions[s.direction]?t.directions[s.direction]:t.directions.any;w=Math.max(s.months,1);while(w--){A=b.make("div",{"class":B.calendar},v);A.setAttribute("data-cal-index",w);if(s.months>1){if(w==Math.max(s.months-1,1)){b.addClassName(A,B.monthFirst)}else{if(w===0){b.addClassName(A,B.monthLast)}else{b.addClassName(A,B.monthMiddle)}}}u=b.make("div",{"class":B.title},A);b.make("a",{"class":B.previousYear},u);b.make("a",{"class":B.previousMonth},u);b.make("a",{"class":B.nextYear},u);b.make("a",{"class":B.nextMonth},u);o=b.make("span",{"class":B.caption},u);C=b.make("div",{"class":B.header},A);x=0;do{E=b.make("span",{},C);E.innerHTML=z[x]}while(++x<7);r=b.make("div",{"class":B.days},A);x=0;F=[];while(x++<42){F.push(b.make("span",{},r))}m.push({caption:o,days:F});if(w){b.make("div",{"class":B.monthSeparator},v)}}t.draw();b.addEvent(v,"mousedown",function(G,H){var j;if(b.hasClassName(H,B.nextMonth)){if(!t.disableNext&&t.publish("view-changed",t,["next-month"])!==false){t.viewStartDate.add("months",1);t.draw()}return false}else{if(b.hasClassName(H,B.previousMonth)){if(!t.disablePreviousMonth&&t.publish("view-changed",t,["previous-month"])!==false){t.viewStartDate.subtract("months",1);t.draw()}return false}else{if(b.hasClassName(H,B.nextYear)){if(!t.disableNext&&t.publish("view-changed",t,["next-year"])!==false){t.viewStartDate.add("years",1);t.draw()}return false}else{if(b.hasClassName(H,B.previousYear)){if(!t.disablePreviousMonth&&t.publish("view-changed",t,["previous-year"])!==false){t.viewStartDate.subtract("years",1);t.draw()}return false}else{if(b.hasClassName(H.parentNode,B.days)&&b.hasClassName(H,B.dayActive)&&(j=H.getAttribute("data-date"))){j=e(j,s.dayAttributeFormat).hours(12);if(t.publish("date-clicked",t,[j])!==false){switch(s.mode){case"multiple":if(!t.addSelected(j)){t.removeSelected(j)}break;case"range":t.addSelected(j);break;case"single":default:t.addSelected(j);break}}return false}}}}}return false});if(!!(s.attachTo=b.$(s.attachTo))){s.attachTo.appendChild(v)}};g.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:true,viewStartDate:null,blackout:null,selected:null,mode:"single",format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn"},disablePreviousMonth:false,disableNextMonth:false,disablePreviousYear:false,disableNextYear:false,directions:{past:function(j){return e(j).yearDay()>=d.yearDay()},"today-past":function(j){return e(j).yearDay()>d.yearDay()},any:function(j){return false},"today-future":function(j){return e(j).yearDay()<d.yearDay()},future:function(j){return e(j).yearDay()<=d.yearDay()}},getSelectedAsDates:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(this._sel[k].nativeDate())}return j},getSelectedAsText:function(l){var j=[];var k=0,m=this._sel.length;for(;k<m;k++){j.push(this._sel[k].format(l||this.settings.format||"YYYY-MM-DD"))}return j},getSelectedRaw:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(e(this._sel[k]))}return j},getSelected:function(k){var j=this.getSelectedAsText(k);switch(this.settings.mode){case"range":j.splice(2);return j.join(this.settings.rangeDelimiter);case"multiple":return j.join(this.settings.multipleDelimiter);case"single":default:return j[0]}},isSelected:function(l){l=e(l).yearDay();if(l<1||!this._sel||this._sel.length<1){return false}switch(this.settings.mode){case"range":var k=this._sel[0]?this._sel[0].yearDay():0,j=this._sel[1]?this._sel[1].yearDay():0;if(k===l||j===l){return 1}if(!k||!j){return 0}if((l>k&&l<j)||(k<j&&l<k&&l>j)){return -1}return false;case"multiple":var m=this._sel.length;while(m--){if(this._sel[m].yearDay()===l){return true}}return false;case"single":default:return(this._sel[0]&&(this._sel[0].yearDay()===l))}return false},setSelected:function(k,j){this._sel=c(k,this.settings.parseSplitDelimiter,this.settings.format);this._sel.sort(function(m,l){return m.yearDay()-l.yearDay()});if(j!==false){this.draw()}},addSelected:function(k,j){k=e(k).hours(12);switch(this.settings.mode){case"multiple":if(!this.isSelected(k)){this._sel.push(k)}else{return false}break;case"range":if(this._sel.length!==1){this._sel=[k]}else{if(k.yearDay()>this._sel[0].yearDay()){this._sel[1]=k}else{this._sel=[k,this._sel[0]]}}break;case"single":default:this._sel=[k];break}this._sel.sort(function(m,l){return m.yearDay()-l.yearDay()});this.publish("change",this);if(j!==false){this.draw()}return true},removeSelected:function(k,j){k=e(k).yearDay();var l=this._sel.length;while(l--){if(this._sel[l].yearDay()===k){this._sel.splice(l,1);this.publish("change",this);if(j!==false){this.draw()}return true}}return false},draw:function a(){var r=e(this.viewStartDate).hours(12),w,n=this.classes,m,v,t,q=0,u,p=0,o,A,x,l=this.settings;u=this.calendars.length;do{w=e(r).date(1);w.day(w.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);m=this.calendars[q];m.caption.innerHTML=r.format(this.settings.titleFormat);p=0;do{v=m.days[p];t=[];A=this.isSelected(w);if(A){t.push(({"-1":n.dayInRange,"1":n.daySelected,"true":n.daySelected})[A])}if(w.month()!=r.month()){t.push(n.dayOutOfMonth)}else{if(!(this.blackout(w)||this.direction(w))||A>0){t.push(n.dayActive)}}if(w.yearDay()===d.yearDay()){t.push(n.dayToday)}x=w.format(this.settings.dayAttributeFormat);if(l.dateClassMap[x]){t.push(l.dateClassMap[x])}v.innerHTML=w.format(l.dayNumberFormat);v.className=t.join(" ");v.setAttribute("data-date",x);w.add("days",1)}while(++p<42);r.add("months",1)}while(++q<u);if(l.directionScrolling){var z=-(e().diff(r,"months"));if(l.direction==="today-past"||l.direction==="past"){if(z<=0){this.disableNextMonth=false;b.removeClassName(this.container,n.disableNextMonth)}else{this.disableNextMonth=true;b.addClassName(this.container,n.disableNextMonth)}}else{if(l.direction==="today-future"||l.direction==="future"){if(z>l.months){this.disablePreviousMonth=false;b.removeClassName(this.container,n.disablePreviousMonth)}else{this.disablePreviousMonth=true;b.addClassName(this.container,n.disablePreviousMonth)}}}if(l.direction==="today-past"||l.direction==="past"){if(r.add({Y:1}).diff(e(),"years")<0){this.disableNextYear=false;b.removeClassName(this.container,n.disableNextYear)}else{this.disableNextYear=true;b.addClassName(this.container,n.disableNextYear)}}else{if(l.direction==="today-future"||l.direction==="future"){if(r.subtract({Y:1}).diff(e(),"years")>0){this.disablePreviousYear=false;b.removeClassName(this.container,n.disablePreviousYear)}else{this.disablePreviousYear=true;b.addClassName(this.container,n.disablePreviousYear)}}}}}};var c=function(l,k,m){var j=[];if(typeof l==="string"){l=l.split(k)}else{if(!b.isArray(l)){l=[l]}}var n=l.length;i=0;do{if(l[i]){j.push(e(l[i],m).hours(12))}}while(++i<n);return j};window.Kalendae=g;var b=g.util={$:function(j){return(typeof j=="string")?document.getElementById(j):j},$$:function(j){return document.querySelectorAll(j)},make:function(n,m,l){var j,o=document.createElement(n);if(!!m){for(j in m){if(m.hasOwnProperty(j)){o.setAttribute(j,m[j])}}}if(!!l){l.appendChild(o)}return o},isVisible:function(j){return j.offsetWidth>0||j.offsetHeight>0},domReady:function(j){/in/.test(document.readyState)?setTimeout(function(){b.domReady(j)},9):j()},addEvent:function(k,j,m){var l=function(n){n=n||window.event;var o=n.target||n.srcElement;var p=m.apply(k,[n,o]);if(p===false){if(!!n.preventDefault){n.preventDefault()}else{n.returnValue=false;n.cancelBubble=true}}return p};if(k.attachEvent){k.attachEvent("on"+j,l)}else{k.addEventListener(j,l,false)}return l},removeEvent:function(k,j,l){if(k.detachEvent){k.detachEvent("on"+j,l)}else{k.removeEventListener(j,l,false)}},hasClassName:function(l,k){if(!(l=b.$(l))){return false}var j=l.className;return(j.length>0&&(j==k||new RegExp("(^|\\s)"+k+"(\\s|$)").test(j)))},addClassName:function(k,j){if(!(k=b.$(k))){return}if(!b.hasClassName(k,j)){k.className+=(k.className?" ":"")+j}},removeClassName:function(k,j){if(!(k=b.$(k))){return}k.className=b.trimString(k.className.replace(new RegExp("(^|\\s+)"+j+"(\\s+|$)")," "))},getPosition:function(m,k){var j=m.offsetLeft,n=m.offsetTop,l={};if(!k){while((m=m.offsetParent)){j+=m.offsetLeft;n+=m.offsetTop}}l[0]=l.left=j;l[1]=l.top=n;return l},getHeight:function(j){return j.offsetHeight||j.scrollHeight},getWidth:function(j){return j.offsetWidth||j.scrollWidth},trimString:function(j){return j.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){var j=(arguments[0]===true),m={},l=j?1:0;var k=function(o,n){if(typeof n!=="object"){return}for(var p in n){if(n.hasOwnProperty(p)){if(j&&typeof o[p]==="object"&&typeof n[p]==="object"){_update(o[p],n[p])}else{o[p]=n[p]}}}return o};for(;l<arguments.length;l++){k(m,arguments[l])}return m},isArray:function(j){return !(!j||(!j.length||j.length===0)||typeof j!=="object"||!j.constructor||j.nodeType||j.item)}};g.util.domReady(function(){var k=b.$$(".auto-kal"),j=k.length,l;while(j--){l=k[j];if(l.tagName==="INPUT"){new g.Input(l)}else{new g({attachTo:l})}}});g.Input=function(m,l){var q=this.input=b.$(m),o;if(!q||q.tagName!=="INPUT"){throw"First argument for Kalendae.Input must be an <input> element or a valid element id."}var k=this,n=k.classes;opts=k.settings=b.merge(k.defaults,l);opts.attachTo=window.document.body;if(!opts.selected){opts.selected=q.value}else{o=true}g.call(k,opts);if(o){q.value=k.getSelected()}var p=k.container,j=false;p.style.display="none";b.addClassName(p,n.positioned);b.addEvent(p,"mousedown",function(r,s){j=true});b.addEvent(window.document,"mousedown",function(r,s){j=false});b.addEvent(q,"focus",function(){k.setSelected(this.value);k.show()});b.addEvent(q,"blur",function(){if(j){j=false;q.focus()}else{k.hide()}});b.addEvent(q,"keyup",function(r){k.setSelected(this.value)});k.subscribe("change",function(){q.value=k.getSelected()})};g.Input.prototype=b.merge(g.prototype,{defaults:b.merge(g.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",offsetLeft:0,offsetTop:0}),classes:b.merge(g.prototype.classes,{positioned:"k-floating"}),show:function(){var k=this.container,j=k.style,m=this.input,l=b.getPosition(m);j.display="";switch(opts.side){case"left":j.left=(l.left-b.getWidth(k)+this.settings.offsetLeft)+"px";j.top=(l.top+this.settings.offsetTop)+"px";break;case"right":j.left=(l.left+b.getWidth(m))+"px";j.top=(l.top+this.settings.offsetTop)+"px";break;case"top":j.left=(l.left+this.settings.offsetLeft)+"px";j.top=(l.top-b.getHeight(k)+this.settings.offsetTop)+"px";break;case"bottom":default:j.left=(l.left+this.settings.offsetLeft)+"px";j.top=(l.top+b.getHeight(m)+this.settings.offsetTop)+"px";break}},hide:function(){this.container.style.display="none"}});
/*!
* MinPubSub, modified for use on Kalendae
* Copyright(c) 2011 Daniel Lamb <daniellmb.com>
* https://github.com/daniellmb/MinPubSub
* MIT Licensed
*/
var f=function(k){if(!k){k=this}var j=k.c_||{};k.publish=function(n,q,m){var o=j[n],l=o?o.length:0,p;while(l--){p=o[l].apply(q,m||[]);if(typeof p==="boolean"){return p}}};k.subscribe=function(l,n,m){if(!j[l]){j[l]=[]}if(m){j[l].push(n)}else{j[l].unshift(n)}return[l,n]};k.unsubscribe=function(n){var m=j[n[0]],o=n[1],l=m?m.length:0;while(l--){if(m[l]===o){m.splice(l,1)}}}};var e=g.moment=(function(k,o){var J,I=Math.round,v={},A=(typeof module!=="undefined"),L="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),E,n=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,r=/[^A-Z]/g,C=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,s=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,K=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,D=/([\+\-]|\d\d)/gi,F="1.3.0",B="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|");function G(M){this._d=M}function u(O,N){var M=O+"";while(M.length<N){M="0"+M}return M}function l(S,W,O,R){var Q=(typeof W==="string"),V=Q?{}:W,N,U,T,P;if(Q&&R){V[W]=R}N=(V.ms||V.milliseconds||0)+(V.s||V.seconds||0)*1000+(V.m||V.minutes||0)*60000+(V.h||V.hours||0)*3600000;U=(V.d||V.days||0)+(V.w||V.weeks||0)*7;T=(V.M||V.months||0)+(V.y||V.years||0)*12;if(N){S.setTime(+S+N*O)}if(U){S.setDate(S.getDate()+U*O)}if(T){P=S.getDate();S.setDate(1);S.setMonth(S.getMonth()+T*O);S.setDate(Math.min(new k(S.getFullYear(),S.getMonth()+1,0).getDate(),P))}return S}function w(M){return Object.prototype.toString.call(M)==="[object Array]"}function q(M){return new k(M[0],M[1]||0,M[2]||1,M[3]||0,M[4]||0,M[5]||0,M[6]||0)}function z(O,W){var P=new G(O),V=P.month(),M=P.date(),S=P.year(),U=P.day(),Y=P.hours(),Q=P.minutes(),N=P.seconds(),R=P.zone(),T=J.ordinal,Z=J.meridiem;function X(ac){var ab,aa;switch(ac){case"M":return V+1;case"Mo":return(V+1)+T(V+1);case"MM":return u(V+1,2);case"MMM":return J.monthsShort[V];case"MMMM":return J.months[V];case"D":return M;case"Do":return M+T(M);case"DD":return u(M,2);case"DDD":ab=new k(S,V,M);aa=new k(S,0,1);return ~~(((ab-aa)/86400000)+1.5);case"DDDo":ab=X("DDD");return ab+T(ab);case"DDDD":return u(X("DDD"),3);case"d":return U;case"do":return U+T(U);case"ddd":return J.weekdaysShort[U];case"dddd":return J.weekdays[U];case"w":ab=new k(S,V,M-U+5);aa=new k(ab.getFullYear(),0,4);return ~~((ab-aa)/86400000/7+1.5);case"wo":ab=X("w");return ab+T(ab);case"ww":return u(X("w"),2);case"YY":return u(S%100,2);case"YYYY":return S;case"a":return Y>11?Z.pm:Z.am;case"A":return Y>11?Z.PM:Z.AM;case"H":return Y;case"HH":return u(Y,2);case"h":return Y%12||12;case"hh":return u(Y%12||12,2);case"m":return Q;case"mm":return u(Q,2);case"s":return N;case"ss":return u(N,2);case"zz":case"z":return(O.toString().match(C)||[""])[0].replace(r,"");case"Z":return(R>0?"+":"-")+u(~~(Math.abs(R)/60),2)+":"+u(~~(Math.abs(R)%60),2);case"ZZ":return(R>0?"+":"-")+u(~~(10*Math.abs(R)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return z(O,J.longDateFormat[ac]);default:return ac.replace(/(^\[)|(\\)|\]$/g,"")}}return W.replace(n,X)}function x(R,S){var V=[0,0,1,0,0,0,0],P=0,U=0,N=false,T=R.match(K),W=S.match(s),Q,M;function O(Z,Y){var X;switch(Z){case"M":case"MM":V[1]=~~Y-1;break;case"MMM":case"MMMM":for(X=0;X<12;X++){if(J.monthsParse[X].test(Y)){V[1]=X;break}}break;case"D":case"DD":case"DDD":case"DDDD":V[2]=~~Y;break;case"YY":Y=~~Y;V[0]=Y+(Y>70?1900:2000);break;case"YYYY":V[0]=~~Math.abs(Y);break;case"a":case"A":M=(Y.toLowerCase()==="pm");break;case"H":case"HH":case"h":case"hh":V[3]=~~Y;break;case"m":case"mm":V[4]=~~Y;break;case"s":case"ss":V[5]=~~Y;break;case"Z":case"ZZ":N=true;X=Y.match(D);if(X[1]){P=~~X[1]}if(X[2]){U=~~X[2]}if(X[0]==="-"){P=-P;U=-U}break}}for(Q=0;Q<W.length;Q++){O(W[Q],T[Q])}if(M&&V[3]<12){V[3]+=12}if(M===false&&V[3]===12){V[3]=0}V[3]+=P;V[4]+=U;return N?new k(k.UTC.apply({},V)):q(V)}function t(Q,P){var M=Math.min(Q.length,P.length),N=Math.abs(Q.length-P.length),R=0,O;for(O=0;O<M;O++){if(~~Q[O]!==~~P[O]){R++}}return R+N}function m(Q,R){var M,T=Q.match(K),O=[],U=99,P,N,S;for(P=0;P<R.length;P++){N=x(Q,R[P]);S=t(T,z(N,R[P]).match(K));if(S<U){U=S;M=N}}return M}J=function(M,O){if(M===null){return null}var N;if(M&&M._d instanceof k){N=new k(+M._d)}else{if(O){if(w(O)){N=m(M,O)}else{N=x(M,O)}}else{N=M===o?new k():M instanceof k?M:w(M)?q(M):new k(M)}}return new G(N)};J.version=F;J.lang=function(O,M){var N,R,P,Q=[];if(M){for(N=0;N<12;N++){Q[N]=new RegExp("^"+M.months[N]+"|^"+M.monthsShort[N].replace(".",""),"i")}M.monthsParse=M.monthsParse||Q;v[O]=M}if(v[O]){for(N=0;N<L.length;N++){R=L[N];J[R]=v[O][R]||J[R]}}else{if(A){P=require("./lang/"+O);J.lang(O,P)}}};J.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(N){var M=N%10;return(~~(N%100/10)===1)?"th":(M===1)?"st":(M===2)?"nd":(M===3)?"rd":"th"}});function j(N,P,O){var M=J.relativeTime[N];return(typeof M==="function")?M(P||1,!!O,N):M.replace(/%d/i,P||1)}function H(O,R){var S=I(Math.abs(O)/1000),Q=I(S/60),M=I(Q/60),T=I(M/24),P=I(T/365),N=S<45&&["s",S]||Q===1&&["m"]||Q<45&&["mm",Q]||M===1&&["h"]||M<22&&["hh",M]||T===1&&["d"]||T<=25&&["dd",T]||T<=45&&["M"]||T<345&&["MM",I(T/30)]||P===1&&["y"]||["yy",P];N[2]=R;return j.apply({},N)}J.fn=G.prototype={clone:function(){return J(this)},valueOf:function(){return +this._d},nativeDate:function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},format:function(M){return z(this._d,M)},add:function(M,N){this._d=l(this._d,M,1,N);return this},subtract:function(M,N){this._d=l(this._d,M,-1,N);return this},diff:function(S,O,U){var M=J(S),T=this._d-M._d,Q=this.year()-M.year(),P=this.month()-M.month(),R=this.day()-M.day(),N;if(O==="months"){N=Q*12+P+R/30}else{if(O==="years"){N=Q+P/12}else{N=O==="seconds"?T/1000:O==="minutes"?T/60000:O==="hours"?T/3600000:O==="days"?T/86400000:O==="weeks"?T/604800000:O==="days"?T/3600:T}}return U?N:I(N)},from:function(P,O){var Q=this.diff(P),M=J.relativeTime,N=H(Q,O);return O?N:(Q<=0?M.past:M.future).replace(/%s/i,N)},fromNow:function(M){return this.from(J(),M)},calendar:function(){var N=J(),M=J([N.year(),N.month(),N.date()]),R=this.diff(M,"days",true),Q=J.calendar,P=Q.sameElse,O=R<-6?P:R<-1?Q.lastWeek:R<0?Q.lastDay:R<1?Q.sameDay:R<2?Q.nextDay:R<7?Q.nextWeek:P;return this.format(typeof O==="function"?O.apply(this):O)},isLeapYear:function(){var M=this.year();return(M%4===0&&M%100!==0)||M%400===0},isDST:function(){return this.zone()!==J([this.year()]).zone()},day:function(N){var M=this._d.getDay();return(typeof N==="undefined")?M:this.add({d:N-M})}};function p(M,N){J.fn[M]=function(O){if(typeof O!=="undefined"){this._d["set"+N](O);return this}else{return this._d["get"+N]()}}}for(E=0;E<B.length;E++){p(B[E].toLowerCase(),B[E])}p("year","FullYear");J.fn.zone=function(){return this._d.getTimezoneOffset()};return J})(Date);e.fn.stripTime=function(){this._d=new Date(Math.floor(this._d.valueOf()/86400000)*86400000);return this};e.fn.yearDay=function(k){var j=Math.floor(this._d/86400000);return(typeof k==="undefined")?j:this.add({d:k-j})};d=e().stripTime();if(typeof jQuery!=="undefined"){jQuery.fn.kalendae=function(j){this.each(function(k,l){if(l.tagName==="INPUT"){$(l).data("kalendae",new g.Input(l,j))}else{$(l).data("kalendae",new g($.extend({},{attachTo:l},j)))}});return this}}})();var Booking=function(){var a=this;this.init=function(){$("#booking_date").kalendae({weekStart:1,direction:"today-future",disableNextYear:true,blackout:function(b){return[0,1,1,1,0,0,0][Kalendae.moment(b).day()]}})}};
window.should_log=true;window.log=function(){log.history=log.history||[];log.history.push(arguments);if(window.should_log&&this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);(typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,a))}};(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})((function(){try{console.log();return window.console}catch(a){return window.console={}}})());$.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=$.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};function Doorman(){var b=function(){return !!$.cookie("age_verified")};var a=function(){var c=["google","googlebot","livebot","msnbot","facebookscraper","facebookexternalhit","ask jeeves"];return navigator.userAgent.match(new RegExp("("+c.join(")|(")+")","i"))!==null};this.verify_age=function(c){log("verifying age");if(b()||a()){log("is verified");$("#bouncer-overlay").remove();log("removed overlay");if(c){c()}log("returning");return}return this.ask_for_id(c)};this.ask_for_id=function(e){var c=$("#bouncer-overlay"),d=this;c.removeClass("disappear");$("#bouncer .y").click(function(f){f.preventDefault();d.remember_for_later();if(e){e()}c.addClass("disappear");setTimeout(function(){c.remove()},300)});$("#bouncer .n").click(this.i_dont_think_so)};this.remember_for_later=function(){$.cookie("age_verified",true)};this.i_dont_think_so=function(c){c.preventDefault();window.location.href="http://www.google.co.nz/search?q=virgin+cocktails"}}document.createElement("nav");document.createElement("header");document.createElement("article");alog=function(a){log.call(this,a);alert(a)};var SuiteEnv={env:function(){return window.location.href.match("0.0.0.0")!=null?"development":"production"},dev:function(){return this.env()=="development"}};function Suite(){var g=this,b=new Scroll(this),c=new Doorman(),a=new ImageLoader(),d=0,f=$("#loading .message");var e=$("#loading .loading_bar span");this.load=function(){b.prepare();g.initMenu();g.initMobile();if(g.isMobile()){a.loadGroup("visuals_low_res",function(){$("#loading-overlay").hide();b.init()},g.low_visual_preloaded)}else{log("Loading as desktop browser");$("body").addClass("showmenu");a.loadGroup("index",g.menu_preloaded,g.bump_loading)}$(function(){c.verify_age(function(){})});$(".people a").click(function(h){h.preventDefault();new ImageModal($(this).attr("href"))})};this.bump_loading=function(){d++;total_images=26;e.css({width:parseInt(Math.round(d/(total_images-1)*94)+6)+"%"})};this.menu_preloaded=function(h){$.each(h,function(l,j){g.apply_image(l,j)});a.loadGroup("visuals_low_res",function(){$("#loading-overlay").remove();a.loadGroup("visuals_high_res",b.init,g.high_visual_preloaded)},g.low_visual_preloaded)};this.low_visual_preloaded=function(h,j){g.apply_image(h,j,g.isMobile()?{}:{backgroundSize:"cover"})};this.high_visual_preloaded=function(h,j){g.apply_image(h,j,{backgroundSize:"cover"})};this.apply_image=function(j,k,h){var h=h||{};if(g.isMobile()){j=j.replace(/ .visual/,"")}log("Applying "+j);$(j).css($.extend(h,{backgroundImage:"url("+k+")",opacity:1}))};this.initMobile=function(){if(g.isMobile()){document.title="Suite Bar";$("body").addClass("touch")}};this.isMobile=function(){return navigator.userAgent.match(/iP(hone|od|ad)/i)};this.initMenu=function(){$("header nav h1 a").click(function(h){$("header nav ul").toggleClass("active")});$("header nav li a").click(function(h){h.stopPropagation();$("header nav ul").toggleClass("active",false)});$("a[rel=reservations]").click(function(h){h.preventDefault();offset=$("#reservations").offset().top;if(window.location.href.indexOf("scroll=true")==-1){$("html, body").scrollTop(offset)}else{$("html, body").animate({scrollTop:offset},{duration:200,easing:"easeInOutSine"})}})}}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1000/30)}})();function Scroll(a){this.app=a;var b=this;this.s={last_story_index:false,follow:false,num_stories:0,window_height:false,stories:["about-1","about-2","cocktail-1","cocktail-2","white-wine","red-wine","beer-1","whiskey","gin","vodka","bitter","tequila","bourbon","cognac","rum","food","awards","bookings","people"]};this.classes={prev:"prev",current:"current",bottom:"bottom",fixed:"fixed",next:"next"};this.prepare=function(){log("preparing scroller");b.stories=[];b.init_stories();b.set_positions();b.scroll_to_hash();b.handle_hash_links();if(b.app.isMobile()){return}b.menu_preparations()};this.init=function(){log("Scroller init");b.set_positions();b.scrollHandler();b.s.num_stories=b.stories.length;b.prepareContact();b.init_contact();if(b.app.isMobile()){return}$(window).resize(b.resizeHandler);b.initMenu();b.animloop()};this.animloop=function(){requestAnimFrame(b.animloop);b.scrollHandler()};this.menu_preparations=function(){$(".menu-cocktails").hover(function(){$(this).css("z-index",76)},function(){$(this).css("z-index",74)})};this.scroll_to_hash=function(){if(location.hash){hash=location.hash;b.trigger_ui(hash)}};this.handle_hash_links=function(){$(function(){$("nav a, .menu-item, header a").click(function(d){var c=$(this).attr("href");b.push_hash(c);if(window.location.href.indexOf("scroll=true")==-1){return}d.preventDefault();$("html, body").animate({scrollTop:$(c).offset().top},{duration:200,easing:"easeInOutSine",complete:function(){location.hash=c}})})})};this.resizeHandler=function(){b.set_positions();b.scrollHandler()};this.set_positions=function(){b.s.window_height=b.windowY();$(".story .visual").css({height:b.s.window_height});b.story_positions=[];b.stories=[];$(".story").each(function(){b.story_positions.push(b.offsetTop(this));if(method==="style"){b.stories.push($(this).find(".visual"))}else{b.stories.push($(this))}})};this.init_stories=function(){$(".story").each(function(c){story=$(this);story.css({zIndex:c+40});$.each(b.s.stories,function(e,d){if(!story.hasClass(d)){return true}story.prepend($('<div class="visual" />'));return true})})};this.offsetTop=function(d){var c=0;if(d.offsetParent){do{c+=d.offsetTop}while((d=d.offsetParent))}return c};this.scrollY=function(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)};this.windowY=function(){var c=0;if(document.body&&document.body.offsetWidth){c=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){c=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){c=window.innerHeight}return c};method="class";this.scrollHandler=function(){y=b.scrollY();follow=true;set=false;for(var e=0,c=b.s.num_stories;e<c;e++){pos=b.story_positions[e];if(y>=pos){continue}set=true;e--;follow=y<=pos-b.s.window_height;break}if(set==false){e--}match=e===b.s.last_story_index&&follow===b.s.follow;if(!match){method==="style"?b.removeStyles():b.removeClasses(e,follow);method==="style"?b.setStylesAt(e,follow):b.setClassesAt(e,follow);if(e!==b.s.last_story_index&&e!==-1){el=(method==="style"?b.stories[e].parent():b.stories[e]).eq(0);var d=0;while(d<100&&el&&!(id=el.attr("id"))){el=el.prev();d++}if(id){b.push_hash("#"+id,e)}}}b.s.last_story_index=e;b.s.follow=follow};this.push_hash=function(d,c){clearTimeout(b.hash_debounce);b.hash_debounce=setTimeout(function(){d=d.replace(/^#/,"");b.replace_hash(d);if(b.stories[c]){b.stories[c].find("h2").animate({opacity:0},{duration:200,easing:"easeInOutSine",complete:function(){b.stories[c].addClass("delayed");$(this).animate({opacity:1},{duration:500,easing:"easeInOutSine"})}})}_gaq.push(["_trackPageview",d]);b.trigger_ui(d)},150)};this.replace_hash=function(e){var d,c=$("#"+e);if(c.length){d=$("<div></div>").css({position:"absolute",visibility:"hidden",top:b.scrollY()+"px"}).attr("id",e).appendTo(document.body);c.attr("id","")}document.location.hash=e;if(c.length){d.remove();c.attr("id",e)}};this.removeStyles=function(){i=b.s.last_story_index;if(i===false||i===-1){return}b.stories[i].css({position:"absolute",top:"0",bottom:"auto"})};this.removeClasses=function(d,c){if((c&&d!=b.s.last_story_index)||d<b.s.last_story_index){$(".story").removeClass("delayed")}if(d<0){b.startMenuHint();setTimeout(function(){$("header li").removeClass("active");b.replace_hash("main-menu")},500)}d=b.s.last_story_index;if(d===false||d===-1){return}b.stories[d].removeClass(b.classes.fixed);b.stories[d].removeClass(b.classes.bottom)};this.initMenu=function(){b.startMenuHint();$(".menu-item").hover(b.clearMenuHint,function(){b.startMenuHint(6000)})};this.startMenuHint=function(c){b.clearMenuHint();b.menuHintTimeout=setTimeout(function(){hint=$("#main-menu .hint");hint.animate({opacity:0.8},{duraction:300,easing:"easeInOutSine"}).delay(1500).animate({opacity:0},{duraction:300,easing:"easeInOutSine"})},c||4000)};this.clearMenuHint=function(){clearTimeout(b.menuHintTimeout)};this.setStylesAt=function(d,c){if(d===-1){return}if(c){b.stories[d].css({position:"fixed",top:0,bottom:"auto"})}else{b.stories[d].css({position:"absolute",top:"auto",bottom:0})}};this.setClassesAt=function(d,c){if(d===-1){return}b.stories[d].addClass(c?b.classes.fixed:b.classes.bottom)};this.trigger_ui=function(c){log("Triggering "+c);switch(c.replace("#","")){case"contact":this.init_contact();break}$("header li").removeClass("active");$("header a[href=#"+c.replace("#","")+"]").parent("li").addClass("active")};this.prepareContact=function(){b.booking=new Booking;b.booking.init()};this.init_contact=function(){if(b.contact){return}b.contact=new Contact();b.contact.init()}}var ImageLoader=function(){var b=this;var a=(SuiteEnv.dev()?"":"/suitebar")+"/assets/images";this.image_groups={index:{"#main-menu":"/b/index.jpg",".menu-spirits":"/m/spirits-mask.png",".menu-cocktails":"/m/cocktails-mask.png",".menu-food":"/m/food-mask.png",".menu-beer":"/m/beer-mask.png",".menu-wine":"/m/wine-mask.png",".menu-awards":"/m/awards-mask.png",".menu-people":"/m/people-mask.png"},visuals_high_res:{".about-2 .visual":"/b/about-1.jpg",".cocktail-1 .visual":"/b/cocktails-2.jpg",".cocktail-2 .visual":"/b/cocktails-1.jpg",".white-wine .visual":"/b/wine-white.jpg",".red-wine .visual":"/b/wine-red.jpg",".beer-1 .visual":"/b/beer.jpg",".whiskey .visual":"/b/whiskey.jpg",".gin .visual":"/b/gin.jpg",".bitter .visual":"/b/bitter.jpg",".vodka .visual":"/b/vodka.jpg",".tequila .visual":"/b/tequila.jpg",".bourbon .visual":"/b/bourbon.jpg",".cognac .visual":"/b/cognac.jpg",".food .visual":"/b/food-2.jpg",".awards .visual":"/b/awards.jpg",".rum .visual":"/b/rum.jpg",".people .visual":"/b/people.jpg",".bookings .visual":"/b/bookings.jpg"},visuals_low_res:{".about-2 .visual":"/b/low/about-1.jpg",".cocktail-1 .visual":"/b/low/cocktails-2.jpg",".cocktail-2 .visual":"/b/low/cocktails-1.jpg",".white-wine .visual":"/b/low/wine-white.jpg",".red-wine .visual":"/b/low/wine-red.jpg",".beer-1 .visual":"/b/low/beer.jpg",".whiskey .visual":"/b/low/whiskey.jpg",".gin .visual":"/b/low/gin.jpg",".bitter .visual":"/b/low/bitter.jpg",".vodka .visual":"/b/low/vodka.jpg",".tequila .visual":"/b/low/tequila.jpg",".bourbon .visual":"/b/low/bourbon.jpg",".cognac .visual":"/b/low/cognac.jpg",".food .visual":"/b/low/food-2.jpg",".awards .visual":"/b/low/awards.jpg",".rum .visual":"/b/low/rum.jpg",".people .visual":"/b/low/people.jpg",".bookings .visual":"/b/low/bookings.jpg"}};this.loadGroup=function(g,f,e){log("Loading group "+g);image_group=b.image_groups[g];$.each(image_group,function(l,j){image_group[l]=a+j});var h=4,d=0;var c=function(j,l,k){img=k;img.rel=j;img.onload=function(){if(e){e(j,l)}if(selectors.length>0){k=null;c(selectors.shift(),sources.shift(),new Image())}else{d++;if(d==h){log("Group loaded "+g);if(f){f(image_group)}}}};img.src=l};selectors=[];sources=[];$.each(b.image_groups[g],function(l,j){selectors.push(l);sources.push(j)});for(i=0;i<h;i++){c(selectors.shift(),sources.shift(),new Image())}}};(function(){})();var maps_callback;var Contact=function(){var h=this,g,d=[-36.844739,174.763244],c=$("#contact .visual .map").get(0),b,f,e;this.init=function(){maps_callback=h.load;$("#contact .visual").css({opacity:1});$.getScript("//maps.googleapis.com/maps/api/js?sensor=false&callback=maps_callback");h.fix_cursor_bug()};this.fix_cursor_bug=function(){cursor=new Image();cursor.src="http://maps.gstatic.com/mapfiles/openhand_8_8.cur"};this.load=function(){h.load_stamen();e=a();var j="toner";var k={zoom:16,scrollwheel:false,center:new google.maps.LatLng(e[0],e[1]),disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeId:j,mapTypeControlOptions:{mapTypeIds:[j]}};g=new google.maps.Map(c,k);g.mapTypes.set(j,new google.maps.StamenMapType(j));h.pin_suite();h.setup_streetview()};var a=function(){var j=489+110;return[d[0]+(0.0001*(20/5.82)),d[1]+(0.0001*Math.round(j/2)/4.666)]};this.pin_suite=function(){var n=new google.maps.MarkerImage("http://mal.co.nz/suite/skull-pin-shadow.png",new google.maps.Size(70,42),new google.maps.Point(0,0),new google.maps.Point(10,42));var l=new google.maps.MarkerImage("http://mal.co.nz/suite/skull-pin.png",new google.maps.Size(41,54),new google.maps.Point(0,0),new google.maps.Point(20,54));var j={coord:[1,1,1,20,18,20,18,1],type:"poly"};var k=new google.maps.LatLng(d[0],d[1]);b=new google.maps.Marker({position:k,map:g,icon:l,shadow:n,shape:j});f=new google.maps.InfoWindow({content:"<p>Suite Bar<p><p><small>123 Hobson St<br />Auckland</small></p>"});function m(p,r,q,o){this.options_=$.extend({width:200,height:90},o);this.loc_=r;this.map_=q;this.div_=null;this.content_=p;this.setMap(q)}m.prototype=new google.maps.OverlayView();m.prototype.onAdd=function(){var p=document.createElement("DIV");p.style.border="none";p.style.borderWidth="0px";p.style.position="absolute";p.className="black-overlay";p.innerHTML=this.content_;this.div_=p;var o=this.getPanes();o.overlayLayer.appendChild(p)};m.prototype.draw=function(){var q=this.getProjection();var p=q.fromLatLngToDivPixel(this.loc_);var r=this.options_.width;var o=this.options_.height;var s=this.div_;s.style.left=(p.x-(r/2))+"px";s.style.top=(p.y-80-o)+"px";s.style.width=r+"px";s.style.height=o+"px"};overlay=new m("<p>Suite Bar</p><p><small>2 Hobson St<br />Auckland Central</small></p>",new google.maps.LatLng(d[0],d[1]),g);google.maps.event.addListener(b,"click",function(){f.open(g,b)})};this.setup_streetview=function(){var k={addressControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},linksControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},panControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},enableCloseButton:true,scrollwheel:false,visible:false};var j=new google.maps.StreetViewPanorama(c,k);g.setStreetView(j)};this.load_stamen=function(){var j=["","a.","b.","c.","d."],l={toner:{url:"http://{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20},"toner-lines":{url:"http://{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20},"toner-labels":{url:"http://{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20},terrain:{url:"http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:18},watercolor:{url:"http://{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16}},m='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.';function k(n){if(n in l){return l[n]}else{throw'No such provider: "'+n+'"'}}if(typeof google==="object"&&typeof google.maps==="object"){google.maps.StamenMapType=function(n){var o=k(n);return google.maps.ImageMapType.call(this,{getTileUrl:function(r,q){var p=(q+r.x+r.y)%j.length;return[o.url.replace("{S}",j[p]).replace("{Z}",q).replace("{X}",r.x).replace("{Y}",r.y)]},tileSize:new google.maps.Size(256,256),name:n,minZoom:o.minZoom,maxZoom:o.maxZoom})};google.maps.StamenMapType.prototype=new google.maps.ImageMapType("_")}}};$.extend($.easing,{easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a}});var ImageModal=function(c){var b=$('<div class="modal-overlay" />'),a=new Image,e=$("<h1>Loading</h1>");$("body").prepend(b);b.append(e);e.css({color:"#fff",textAlign:"center",marginTop:$(window).height()/2});a.onload=function(){$img=$(a);e.remove();b.append($img);if($img.width()>$(window).width()){$img.css({width:$(window).width()})}$img.css({position:"absolute",display:"block",left:"50%",top:"50%",marginTop:(-1*($img.height()/2))+"px",marginLeft:(-1*($img.width()/2))+"px"});$img.click(d)};a.src=c;var d=function(){b.remove()};b.click(d)};var CardToCall=function(a){var g=this,f="",c=$(a);var e=$("#card_to_call");function b(){if(navigator.appVersion.indexOf("Mac")<0){isMacOS=false}if(navigator.appVersion.indexOf("iPhone")>-1||navigator.appVersion.indexOf("iPod")>-1||navigator.appVersion.indexOf("iPad")>-1){isTouchDevice=true;document.body.className+=" touch";document.getElementById("downloadButton").onmouseover=download}if(navigator.appVersion.indexOf("WebKit")>-1){if((window.media&&window.media.matchMedium("(-webkit-transform-3d)"))||(window.styleMedia&&window.styleMedia.matchMedium("-webkit-transform-3d"))){document.body.className+=" browserWebKit";f="webkit"}else{document.body.className+=" browserOldWebkit";f="oldWebkit"}}else{document.body.className+=" browserOther";f="other"}}g.flip=function(h){h.preventDefault();e.toggleClass("flipped");return;var k=document.getElementById("featuresCard");var j=this;if(d(h)){document.getElementById("featuresCard").style.webkitTransitionDuration="3s";flipMidpoint=900}else{document.getElementById("featuresCard").style.webkitTransitionDuration="1s";flipMidpoint=300}if(k.className==""){hideAllEffects();if(f=="oldWebkit"){setTimeout("document.getElementById('featuresList').style.display = 'block'",flipMidpoint);setTimeout("document.getElementById('featuresScreenshots').style.display = 'none'",flipMidpoint)}else{if(f=="other"){document.getElementById("featuresList").style.display="block";document.getElementById("featuresScreenshots").style.display="none"}}}else{setTimeout("document.getElementById('featuresEffects"+swappedView+"').style.display = 'block'",(flipMidpoint*2));if(f=="oldWebkit"){setTimeout("document.getElementById('featuresList').style.display = 'none'",flipMidpoint);setTimeout("document.getElementById('featuresScreenshots').style.display = 'block'",flipMidpoint)}else{if(f=="other"){document.getElementById("featuresList").style.display="none";document.getElementById("featuresScreenshots").style.display="block"}}}k.className=(k.className=="")?"card flipped":"";j.className=(j.className=="")?"pressed":""};function d(j){var h=false;if(!j&&window.event){h=window.event.shiftKey}else{if(j){h=j.shiftKey;if(h){j.stopPropagation()}}}return h}};(function(h){var d;var g=function(p,k){if(!(p instanceof Element||typeof p==="string")){k=p}var t=this,B=t.classes,s=t.settings=b.merge(t.defaults,{attachTo:p},k||{}),v=t.container=b.make("div",{"class":B.container}),m=t.calendars=[],q=e().day(s.weekStart),n,z=[],A,u,o,C,r,F=[],E,x=0,w=s.months;if(b.isIE8()){b.addClassName(v,"ie8")}x=7;while(x--){z.push(q.format("ddd").substr(0,s.columnHeaderLength));q.add("days",1)}f(t);if(typeof s.subscribe==="object"){for(x in s.subscribe){if(s.subscribe.hasOwnProperty(x)){t.subscribe(x,s.subscribe[x])}}}t._sel=[];if(!!s.selected){t.setSelected(s.selected,false)}if(!!s.viewStartDate){n=e(s.viewStartDate,s.format)}else{if(t._sel.length>0){n=e(t._sel[0])}else{n=e()}}t.viewStartDate=n.date(1);var D=({past:s.months-1,"today-past":s.months-1,any:s.months>2?Math.floor(s.months/2):0,"today-future":0,future:0})[this.settings.direction];if(D&&e().month()==e(t.viewStartDate).month()){t.viewStartDate=e(t.viewStartDate).subtract({M:D}).date(1)}if(typeof s.blackout==="function"){t.blackout=s.blackout}else{if(!!s.blackout){var l=c(s.blackout,s.parseSplitDelimiter);t.blackout=function(j){j=e(j).yearDay();if(j<1||!t._sel||t._sel.length<1){return false}var G=l.length;while(G--){if(l[G].yearDay()===j){return true}}return false}}else{t.blackout=function(){return false}}}t.direction=t.directions[s.direction]?t.directions[s.direction]:t.directions.any;w=Math.max(s.months,1);while(w--){A=b.make("div",{"class":B.calendar},v);A.setAttribute("data-cal-index",w);if(s.months>1){if(w==Math.max(s.months-1,1)){b.addClassName(A,B.monthFirst)}else{if(w===0){b.addClassName(A,B.monthLast)}else{b.addClassName(A,B.monthMiddle)}}}u=b.make("div",{"class":B.title},A);b.make("a",{"class":B.previousYear},u);b.make("a",{"class":B.previousMonth},u);b.make("a",{"class":B.nextYear},u);b.make("a",{"class":B.nextMonth},u);o=b.make("span",{"class":B.caption},u);C=b.make("div",{"class":B.header},A);x=0;do{E=b.make("span",{},C);E.innerHTML=z[x]}while(++x<7);r=b.make("div",{"class":B.days},A);x=0;F=[];while(x++<42){F.push(b.make("span",{},r))}m.push({caption:o,days:F});if(w){b.make("div",{"class":B.monthSeparator},v)}}t.draw();b.addEvent(v,"mousedown",function(G,H){var j;if(b.hasClassName(H,B.nextMonth)){if(!t.disableNext&&t.publish("view-changed",t,["next-month"])!==false){t.viewStartDate.add("months",1);t.draw()}return false}else{if(b.hasClassName(H,B.previousMonth)){if(!t.disablePreviousMonth&&t.publish("view-changed",t,["previous-month"])!==false){t.viewStartDate.subtract("months",1);t.draw()}return false}else{if(b.hasClassName(H,B.nextYear)){if(!t.disableNext&&t.publish("view-changed",t,["next-year"])!==false){t.viewStartDate.add("years",1);t.draw()}return false}else{if(b.hasClassName(H,B.previousYear)){if(!t.disablePreviousMonth&&t.publish("view-changed",t,["previous-year"])!==false){t.viewStartDate.subtract("years",1);t.draw()}return false}else{if(b.hasClassName(H.parentNode,B.days)&&b.hasClassName(H,B.dayActive)&&(j=H.getAttribute("data-date"))){j=e(j,s.dayAttributeFormat).hours(12);if(t.publish("date-clicked",t,[j])!==false){switch(s.mode){case"multiple":if(!t.addSelected(j)){t.removeSelected(j)}break;case"range":t.addSelected(j);break;case"single":default:t.addSelected(j);break}}return false}}}}}return false});if(!!(s.attachTo=b.$(s.attachTo))){s.attachTo.appendChild(v)}};g.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:true,viewStartDate:null,blackout:null,selected:null,mode:"single",format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn"},disablePreviousMonth:false,disableNextMonth:false,disablePreviousYear:false,disableNextYear:false,directions:{past:function(j){return e(j).yearDay()>=d.yearDay()},"today-past":function(j){return e(j).yearDay()>d.yearDay()},any:function(j){return false},"today-future":function(j){return e(j).yearDay()<d.yearDay()},future:function(j){return e(j).yearDay()<=d.yearDay()}},getSelectedAsDates:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(this._sel[k].toDate())}return j},getSelectedAsText:function(l){var j=[];var k=0,m=this._sel.length;for(;k<m;k++){j.push(this._sel[k].format(l||this.settings.format||"YYYY-MM-DD"))}return j},getSelectedRaw:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(e(this._sel[k]))}return j},getSelected:function(k){var j=this.getSelectedAsText(k);switch(this.settings.mode){case"range":j.splice(2);return j.join(this.settings.rangeDelimiter);case"multiple":return j.join(this.settings.multipleDelimiter);case"single":default:return j[0]}},isSelected:function(l){l=e(l).yearDay();if(l<1||!this._sel||this._sel.length<1){return false}switch(this.settings.mode){case"range":var k=this._sel[0]?this._sel[0].yearDay():0,j=this._sel[1]?this._sel[1].yearDay():0;if(k===l||j===l){return 1}if(!k||!j){return 0}if((l>k&&l<j)||(k<j&&l<k&&l>j)){return -1}return false;case"multiple":var m=this._sel.length;while(m--){if(this._sel[m].yearDay()===l){return true}}return false;case"single":default:return(this._sel[0]&&(this._sel[0].yearDay()===l))}return false},setSelected:function(k,j){this._sel=c(k,this.settings.parseSplitDelimiter,this.settings.format);this._sel.sort(function(m,l){return m.yearDay()-l.yearDay()});if(j!==false){this.draw()}},addSelected:function(k,j){k=e(k).hours(12);switch(this.settings.mode){case"multiple":if(!this.isSelected(k)){this._sel.push(k)}else{return false}break;case"range":if(this._sel.length!==1){this._sel=[k]}else{if(k.yearDay()>this._sel[0].yearDay()){this._sel[1]=k}else{this._sel=[k,this._sel[0]]}}break;case"single":default:this._sel=[k];break}this._sel.sort(function(m,l){return m.yearDay()-l.yearDay()});this.publish("change",this);if(j!==false){this.draw()}return true},removeSelected:function(k,j){k=e(k).yearDay();var l=this._sel.length;while(l--){if(this._sel[l].yearDay()===k){this._sel.splice(l,1);this.publish("change",this);if(j!==false){this.draw()}return true}}return false},draw:function a(){var r=e(this.viewStartDate).hours(12),w,n=this.classes,m,v,t,q=0,u,p=0,o,A,x,l=this.settings;u=this.calendars.length;do{w=e(r).date(1);w.day(w.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);m=this.calendars[q];m.caption.innerHTML=r.format(this.settings.titleFormat);p=0;do{v=m.days[p];t=[];A=this.isSelected(w);if(A){t.push(({"-1":n.dayInRange,"1":n.daySelected,"true":n.daySelected})[A])}if(w.month()!=r.month()){t.push(n.dayOutOfMonth)}else{if(!(this.blackout(w)||this.direction(w))||A>0){t.push(n.dayActive)}}if(w.yearDay()===d.yearDay()){t.push(n.dayToday)}x=w.format(this.settings.dayAttributeFormat);if(l.dateClassMap[x]){t.push(l.dateClassMap[x])}v.innerHTML=w.format(l.dayNumberFormat);v.className=t.join(" ");v.setAttribute("data-date",x);w.add("days",1)}while(++p<42);r.add("months",1)}while(++q<u);if(l.directionScrolling){var z=-(e().diff(r,"months"));if(l.direction==="today-past"||l.direction==="past"){if(z<0){this.disableNextMonth=false;b.removeClassName(this.container,n.disableNextMonth)}else{this.disableNextMonth=true;b.addClassName(this.container,n.disableNextMonth)}}else{if(l.direction==="today-future"||l.direction==="future"){if(z>=l.months){this.disablePreviousMonth=false;b.removeClassName(this.container,n.disablePreviousMonth)}else{this.disablePreviousMonth=true;b.addClassName(this.container,n.disablePreviousMonth)}}}if(l.direction==="today-past"||l.direction==="past"){if(r.add({y:1}).diff(e(),"months")<=0){this.disableNextYear=false;b.removeClassName(this.container,n.disableNextYear)}else{this.disableNextYear=true;b.addClassName(this.container,n.disableNextYear)}}else{if(l.direction==="today-future"||l.direction==="future"){if((r.subtract({y:1}).diff(e(),"months")-(l.months-1))>=0){this.disablePreviousYear=false;b.removeClassName(this.container,n.disablePreviousYear)}else{this.disablePreviousYear=true;b.addClassName(this.container,n.disablePreviousYear)}}}}}};var c=function(l,k,m){var j=[];if(typeof l==="string"){l=l.split(k)}else{if(!b.isArray(l)){l=[l]}}var n=l.length;i=0;do{if(l[i]){j.push(e(l[i],m).hours(12))}}while(++i<n);return j};window.Kalendae=g;var b=g.util={isIE8:function(){return !!((/msie 8./i).test(navigator.appVersion)&&!(/opera/i).test(navigator.userAgent)&&window.ActiveXObject&&XDomainRequest&&!window.msPerformance)},$:function(j){return(typeof j=="string")?document.getElementById(j):j},$$:function(j){return document.querySelectorAll(j)},make:function(n,m,l){var j,o=document.createElement(n);if(!!m){for(j in m){if(m.hasOwnProperty(j)){o.setAttribute(j,m[j])}}}if(!!l){l.appendChild(o)}return o},isVisible:function(j){return j.offsetWidth>0||j.offsetHeight>0},getStyle:function(k,j){var l;if(k.currentStyle){l=k.currentStyle[j]}else{if(window.getComputedStyle){l=window.getComputedStyle(k,null)[j]}}return l},domReady:function(j){/in/.test(document.readyState)?setTimeout(function(){b.domReady(j)},9):j()},addEvent:function(k,j,m){var l=function(n){n=n||window.event;var o=n.target||n.srcElement;var p=m.apply(k,[n,o]);if(p===false){if(!!n.preventDefault){n.preventDefault()}else{n.returnValue=false;n.cancelBubble=true}}return p};if(k.attachEvent){k.attachEvent("on"+j,l)}else{k.addEventListener(j,l,false)}return l},removeEvent:function(k,j,l){if(k.detachEvent){k.detachEvent("on"+j,l)}else{k.removeEventListener(j,l,false)}},hasClassName:function(l,k){if(!(l=b.$(l))){return false}var j=l.className;return(j.length>0&&(j==k||new RegExp("(^|\\s)"+k+"(\\s|$)").test(j)))},addClassName:function(k,j){if(!(k=b.$(k))){return}if(!b.hasClassName(k,j)){k.className+=(k.className?" ":"")+j}},removeClassName:function(k,j){if(!(k=b.$(k))){return}k.className=b.trimString(k.className.replace(new RegExp("(^|\\s+)"+j+"(\\s+|$)")," "))},isFixed:function(j){do{if(b.getStyle(j,"position")==="fixed"){return true}}while((j=j.offsetParent));return false},getPosition:function(m,k){var j=m.offsetLeft,n=m.offsetTop,l={};if(!k){while((m=m.offsetParent)){j+=m.offsetLeft;n+=m.offsetTop}}l[0]=l.left=j;l[1]=l.top=n;return l},getHeight:function(j){return j.offsetHeight||j.scrollHeight},getWidth:function(j){return j.offsetWidth||j.scrollWidth},trimString:function(j){return j.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){var j=(arguments[0]===true),m={},l=j?1:0;var k=function(o,n){if(typeof n!=="object"){return}for(var p in n){if(n.hasOwnProperty(p)){if(j&&typeof o[p]==="object"&&typeof n[p]==="object"){_update(o[p],n[p])}else{o[p]=n[p]}}}return o};for(;l<arguments.length;l++){k(m,arguments[l])}return m},isArray:function(j){return !(!j||(!j.length||j.length===0)||typeof j!=="object"||!j.constructor||j.nodeType||j.item)}};g.util.domReady(function(){var k=b.$$(".auto-kal"),j=k.length,l;while(j--){l=k[j];if(l.tagName==="INPUT"){new g.Input(l)}else{new g({attachTo:l})}}});g.Input=function(m,r){var n=this.input=b.$(m),o;if(!n||n.tagName!=="INPUT"){throw"First argument for Kalendae.Input must be an <input> element or a valid element id."}var q=this,k=q.classes;opts=q.settings=b.merge(q.defaults,r);opts.attachTo=window.document.body;if(!opts.selected){opts.selected=n.value}else{o=true}g.call(q,opts);if(opts.closeButton){var j=b.make("a",{"class":k.closeButton},q.container);b.addEvent(j,"click",function(){n.blur()})}if(o){n.value=q.getSelected()}var p=q.container,l=false;p.style.display="none";b.addClassName(p,k.positioned);b.addEvent(p,"mousedown",function(s,t){l=true});b.addEvent(window.document,"mousedown",function(s,t){l=false});b.addEvent(n,"focus",function(){q.setSelected(this.value);q.show()});b.addEvent(n,"blur",function(){if(l){l=false;n.focus()}else{q.hide()}});b.addEvent(n,"keyup",function(s){q.setSelected(this.value)});q.subscribe("change",function(){n.value=q.getSelected()})};g.Input.prototype=b.merge(g.prototype,{defaults:b.merge(g.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:true,offsetLeft:0,offsetTop:0}),classes:b.merge(g.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var k=this.container,j=k.style,m=this.input,l=b.getPosition(m);j.display="";switch(opts.side){case"left":j.left=(l.left-b.getWidth(k)+this.settings.offsetLeft)+"px";j.top=(l.top+this.settings.offsetTop)+"px";break;case"right":j.left=(l.left+b.getWidth(m))+"px";j.top=(l.top+this.settings.offsetTop)+"px";break;case"top":j.left=(l.left+this.settings.offsetLeft)+"px";j.top=(l.top-b.getHeight(k)+this.settings.offsetTop)+"px";break;case"bottom":default:j.left=(l.left+this.settings.offsetLeft)+"px";j.top=(l.top+b.getHeight(m)+this.settings.offsetTop)+"px";break}j.position=b.isFixed(m)?"fixed":"absolute"},hide:function(){this.container.style.display="none"}});
/*!
* MinPubSub, modified for use on Kalendae
* Copyright(c) 2011 Daniel Lamb <daniellmb.com>
* https://github.com/daniellmb/MinPubSub
* MIT Licensed
*/
var f=function(k){if(!k){k=this}var j=k.c_||{};k.publish=function(n,q,m){var o=j[n],l=o?o.length:0,p;while(l--){p=o[l].apply(q,m||[]);if(typeof p==="boolean"){return p}}};k.subscribe=function(l,n,m){if(!j[l]){j[l]=[]}if(m){j[l].push(n)}else{j[l].unshift(n)}return[l,n]};k.unsubscribe=function(n){var m=j[n[0]],o=n[1],l=m?m.length:0;while(l--){if(m[l]===o){m.splice(l,1)}}}};var e=g.moment=(function(l,q){var O,N=Math.round,z={},D=(typeof module!=="undefined"),Q="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),J,G=/^\/?Date\((\-?\d+)/i,o=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,u=/[^A-Z]/g,F=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,v=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,P=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,j=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,C="YYYY-MM-DDTHH:mm:ssZ",r=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],H=/([\+\-]|\d\d)/gi,K="1.5.0",E="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|");function L(S,R){this._d=S;this._isUTC=!!R}function x(T,S){var R=T+"";while(R.length<S){R="0"+R}return R}function m(W,aa,S,V){var U=(typeof aa==="string"),Z=U?{}:aa,R,Y,X,T;if(U&&V){Z[aa]=+V}R=(Z.ms||Z.milliseconds||0)+(Z.s||Z.seconds||0)*1000+(Z.m||Z.minutes||0)*60000+(Z.h||Z.hours||0)*3600000;Y=(Z.d||Z.days||0)+(Z.w||Z.weeks||0)*7;X=(Z.M||Z.months||0)+(Z.y||Z.years||0)*12;if(R){W.setTime(+W+R*S)}if(Y){W.setDate(W.getDate()+Y*S)}if(X){T=W.getDate();W.setDate(1);W.setMonth(W.getMonth()+X*S);W.setDate(Math.min(new l(W.getFullYear(),W.getMonth()+1,0).getDate(),T))}return W}function A(R){return Object.prototype.toString.call(R)==="[object Array]"}function t(R){return new l(R[0],R[1]||0,R[2]||1,R[3]||0,R[4]||0,R[5]||0,R[6]||0)}function p(T,aa){var Z=T.month(),R=T.date(),W=T.year(),Y=T.day(),ac=T.hours(),U=T.minutes(),S=T.seconds(),V=-T.zone(),X=O.ordinal,ad=O.meridiem;function ab(ag){var af,ae;switch(ag){case"M":return Z+1;case"Mo":return(Z+1)+X(Z+1);case"MM":return x(Z+1,2);case"MMM":return O.monthsShort[Z];case"MMMM":return O.months[Z];case"D":return R;case"Do":return R+X(R);case"DD":return x(R,2);case"DDD":af=new l(W,Z,R);ae=new l(W,0,1);return ~~(((af-ae)/86400000)+1.5);case"DDDo":af=ab("DDD");return af+X(af);case"DDDD":return x(ab("DDD"),3);case"d":return Y;case"do":return Y+X(Y);case"ddd":return O.weekdaysShort[Y];case"dddd":return O.weekdays[Y];case"w":af=new l(W,Z,R-Y+5);ae=new l(af.getFullYear(),0,4);return ~~((af-ae)/86400000/7+1.5);case"wo":af=ab("w");return af+X(af);case"ww":return x(ab("w"),2);case"YY":return x(W%100,2);case"YYYY":return W;case"a":return ac>11?ad.pm:ad.am;case"A":return ac>11?ad.PM:ad.AM;case"H":return ac;case"HH":return x(ac,2);case"h":return ac%12||12;case"hh":return x(ac%12||12,2);case"m":return U;case"mm":return x(U,2);case"s":return S;case"ss":return x(S,2);case"zz":case"z":return(T._d.toString().match(F)||[""])[0].replace(u,"");case"Z":return(V<0?"-":"+")+x(~~(Math.abs(V)/60),2)+":"+x(~~(Math.abs(V)%60),2);case"ZZ":return(V<0?"-":"+")+x(~~(10*Math.abs(V)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return p(T,O.longDateFormat[ag]);default:return ag.replace(/(^\[)|(\\)|\]$/g,"")}}return aa.replace(o,ab)}function B(W,Y){var ab=[0,0,1,0,0,0,0],U=0,aa=0,S=false,Z=W.match(P),ac=Y.match(v),X=Math.min(Z.length,ac.length),V,R;function T(af,ae){var ad;switch(af){case"M":case"MM":ab[1]=~~ae-1;break;case"MMM":case"MMMM":for(ad=0;ad<12;ad++){if(O.monthsParse[ad].test(ae)){ab[1]=ad;break}}break;case"D":case"DD":case"DDD":case"DDDD":ab[2]=~~ae;break;case"YY":ae=~~ae;ab[0]=ae+(ae>70?1900:2000);break;case"YYYY":ab[0]=~~Math.abs(ae);break;case"a":case"A":R=(ae.toLowerCase()==="pm");break;case"H":case"HH":case"h":case"hh":ab[3]=~~ae;break;case"m":case"mm":ab[4]=~~ae;break;case"s":case"ss":ab[5]=~~ae;break;case"Z":case"ZZ":S=true;ad=(ae||"").match(H);if(ad&&ad[1]){U=~~ad[1]}if(ad&&ad[2]){aa=~~ad[2]}if(ad&&ad[0]==="+"){U=-U;aa=-aa}break}}for(V=0;V<X;V++){T(ac[V],Z[V])}if(R&&ab[3]<12){ab[3]+=12}if(R===false&&ab[3]===12){ab[3]=0}ab[3]+=U;ab[4]+=aa;return S?new l(l.UTC.apply({},ab)):t(ab)}function w(V,U){var R=Math.min(V.length,U.length),S=Math.abs(V.length-U.length),W=0,T;for(T=0;T<R;T++){if(~~V[T]!==~~U[T]){W++}}return W+S}function n(V,W){var R,Y=V.match(P),T=[],Z=99,U,S,X;for(U=0;U<W.length;U++){S=B(V,W[U]);X=w(Y,p(new L(S),W[U]).match(P));if(X<Z){Z=X;R=S}}return R}function I(R){var T="YYYY-MM-DDT",S;if(j.exec(R)){for(S=0;S<3;S++){if(r[S][1].exec(R)){T+=r[S][0];break}}return B(R,T+"Z")}return new l(R)}function k(S,U,T){var R=O.relativeTime[S];return(typeof R==="function")?R(U||1,!!T,S):R.replace(/%d/i,U||1)}function M(T,W){var X=N(Math.abs(T)/1000),V=N(X/60),R=N(V/60),Y=N(R/24),U=N(Y/365),S=X<45&&["s",X]||V===1&&["m"]||V<45&&["mm",V]||R===1&&["h"]||R<22&&["hh",R]||Y===1&&["d"]||Y<=25&&["dd",Y]||Y<=45&&["M"]||Y<345&&["MM",N(Y/30)]||U===1&&["y"]||["yy",U];S[2]=W;return k.apply({},S)}O=function(S,U){if(S===null||S===""){return null}var T,R;if(S&&S._d instanceof l){T=new l(+S._d)}else{if(U){if(A(U)){T=n(S,U)}else{T=B(S,U)}}else{R=G.exec(S);T=S===q?new l():R?new l(+R[1]):S instanceof l?S:A(S)?t(S):typeof S==="string"?I(S):new l(S)}}return new L(T)};O.utc=function(R,S){if(A(R)){return new L(new l(l.UTC.apply({},R)),true)}return(S&&R)?O(R+" 0",S+" Z").utc():O(R).utc()};O.humanizeDuration=function(T,U,V){var W=+T,R=O.relativeTime,S;switch(U){case"seconds":W*=1000;break;case"minutes":W*=60000;break;case"hours":W*=3600000;break;case"days":W*=86400000;break;case"weeks":W*=604800000;break;case"months":W*=2592000000;break;case"years":W*=31536000000;break;default:V=!!U;break}S=M(W,!V);return V?(W<=0?R.past:R.future).replace(/%s/i,S):S};O.version=K;O.defaultFormat=C;O.lang=function(T,R){var S,W,U,V=[];if(R){for(S=0;S<12;S++){V[S]=new RegExp("^"+R.months[S]+"|^"+R.monthsShort[S].replace(".",""),"i")}R.monthsParse=R.monthsParse||V;z[T]=R}if(z[T]){for(S=0;S<Q.length;S++){W=Q[S];O[W]=z[T][W]||O[W]}}else{if(D){U=require("./lang/"+T);O.lang(T,U)}}};O.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(S){var R=S%10;return(~~(S%100/10)===1)?"th":(R===1)?"st":(R===2)?"nd":(R===3)?"rd":"th"}});O.isMoment=function(R){return R instanceof L};O.fn=L.prototype={clone:function(){return O(this)},valueOf:function(){return +this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(R){return p(this,R?R:O.defaultFormat)},add:function(R,S){this._d=m(this._d,R,1,S);return this},subtract:function(R,S){this._d=m(this._d,R,-1,S);return this},diff:function(Y,T,aa){var R=O(Y),V=(this.zone()-R.zone())*60000,Z=this._d-R._d-V,X=this.year()-R.year(),W=this.month()-R.month(),U=this.date()-R.date(),S;if(T==="months"){S=X*12+W+U/30}else{if(T==="years"){S=X+W/12}else{S=T==="seconds"?Z/1000:T==="minutes"?Z/60000:T==="hours"?Z/3600000:T==="days"?Z/86400000:T==="weeks"?Z/604800000:Z}}return aa?S:N(S)},from:function(S,R){return O.humanizeDuration(this.diff(S),!R)},fromNow:function(R){return this.from(O(),R)},calendar:function(){var U=this.diff(O().sod(),"days",true),T=O.calendar,S=T.sameElse,R=U<-6?S:U<-1?T.lastWeek:U<0?T.lastDay:U<1?T.sameDay:U<2?T.nextDay:U<7?T.nextWeek:S;return this.format(typeof R==="function"?R.apply(this):R)},isLeapYear:function(){var R=this.year();return(R%4===0&&R%100!==0)||R%400===0},isDST:function(){return(this.zone()<O([this.year()]).zone()||this.zone()<O([this.year(),5]).zone())},day:function(S){var R=this._d.getDay();return(typeof S==="undefined")?R:this.add({d:S-R})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};function s(R,S){O.fn[R]=function(T){var U=this._isUTC?"UTC":"";if(typeof T!=="undefined"){this._d["set"+U+S](T);return this}else{return this._d["get"+U+S]()}}}for(J=0;J<E.length;J++){s(E[J].toLowerCase(),E[J])}s("year","FullYear");return O})(Date);e.fn.stripTime=function(){this._d=new Date(Math.floor(this._d.valueOf()/86400000)*86400000);return this};e.fn.yearDay=function(k){var j=Math.floor(this._d/86400000);return(typeof k==="undefined")?j:this.add({d:k-j})};d=e().stripTime();if(typeof jQuery!=="undefined"){jQuery.fn.kalendae=function(j){this.each(function(k,l){if(l.tagName==="INPUT"){$(l).data("kalendae",new g.Input(l,j))}else{$(l).data("kalendae",new g($.extend({},{attachTo:l},j)))}});return this}}})();var Booking=function(){var g=this,n=$("#booking_date_picker"),p=$("#booking_time_picker"),d=$("#booking_date"),c=$("#booking_time"),l=$("#booking_guests"),a=$("#booking_name"),h=$("#booking_phone"),j=$("#booking_email"),b=$("#booking_form"),m=$(".booking_confirmation"),f=$("#booking_comments"),e,k,o="http://0.0.0.0:3001/v1/bookings/create";o="http://suite-bookings.herokuapp.com/v1/bookings/create";this.init=function(){n.kalendae({weekStart:1,direction:"today-future",disableNextYear:true,blackout:function(q){return[0,1,1,1,0,0,0][Kalendae.moment(q).day()]},subscribe:{change:this.change_date}});l.change(function(){var q=parseInt($(this).val());$(".guests_counter").html(q);if(q==10){$(".guests").addClass("large")}else{$(".guests").removeClass("large")}});$("li",p).click(this.change_time);b.submit(this.validate);$(".y",m).click(this.submit_booking);$(".n",m).click(this.change_booking)};this.change_date=function(){d.val(this.getSelected());g.update_date_display()};this.change_time=function(){c.val($(this).html());g.update_date_display()};this.date_display=function(){var q="";if(d.val()){q+=Kalendae.moment(d.val(),"YYYY-MM-DD").format("MMM Do")}if(c.val()){q+=d.val()?", "+c.val():c.val()}return q};this.update_date_display=function(){$("#booking_date_display").val(g.date_display())};this.validate=function(s){s.preventDefault();var r={name:a.val(),phone:h.val(),email:j.val(),date:d.val(),time:c.val(),guests:l.val()},q=new Array();$(".error",b).removeClass("error");if(e(r.name)){q.push(a)}if(e(r.phone)){q.push(h)}if(e(r.date)){q.push(d)}if(e(r.time)){q.push(c)}if(e(r.guests)){q.push(l)}if(q.length==0){return g.show_confirmation()}$.each(q,function(u,t){k(t,u==0)})};this.show_confirmation=function(){g.update_confirmation_details();g.show_confirmation_dialog()};this.update_confirmation_details=function(){$(".name .value",m).html(a.val());$(".phone .value",m).html(h.val());$(".email .value",m).html(j.val()==""?"not given":j.val());$(".date .value",m).html(g.date_display());$(".guests .number",m).html(l.val());$(".guests .word",m).html("guest"+(parseInt(l.val())==1?"":"s"));var q,r=f.val();if(r){$(".comments",m).removeClass("statement disabled").html("").append($("<div />").addClass("title").text("Comments:")).append($("<div />").addClass("value dotted").text(r))}else{$(".comments",m).html("").addClass("statement disabled").text("No Comments")}};this.change_booking=function(q){q.preventDefault();g.hide_confirmation_dialog();$("html, body").animate({scrollTop:b.offset().top-140})};this.submit_booking=function(q){q.preventDefault();$.ajax({url:o,data:b.serialize(),type:"get",dataType:"jsonp"}).done(g.booking_succeeded)};this.booking_succeeded=function(q){if(q.status!="success"){return g.booking_failed(q)}console.log("succeeded");console.log(q);$(".modal",m).html("<h1>Booking Request</h1><h2>Your request has been sent!</h2><h2>Thank you for making a booking request. We review requests regularly and will be in touch to confirm soon.</h2><div class='options'><a class='btn n'>Close</a></div>");$(".n",m).click(g.change_booking)};this.booking_failed=function(q){console.log("failed");console.log(q);if(q.status=="error"){$(".modal",m).html("<h1>Booking Request</h1><h2>Sorry, an error occured!</h2><h2>Looks like things didn’t go as planned on our end… please contact Suite directly to make your booking.</h2><div class='options'><a class='btn n'>Close</a></div>");setTimeout(g.hide_confirmation_dialog,10000);$(".n",m).click(g.change_booking);return}alert("Please fix the following: \n"+q.errors.join("\n"));g.change_booking()};this.show_confirmation_dialog=function(){m.removeClass("disappear")};this.hide_confirmation_dialog=function(){m.addClass("disappear")};k=function(r,q){r.parents(".input").addClass("error");if(!q){return}$("html, body").animate({scrollTop:$(r).offset().top-140})};e=function(q){return !q||q==""}};